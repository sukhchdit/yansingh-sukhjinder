<!--Welcome Bar-->
<div class="welcomeBar">
  <div class="leftBlock">
    <!-- <div class="navIconMobile" (click)="openResponsiveNav()">
      <svg width="20" height="12" viewBox="0 0 20 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="20" height="2" rx="1" fill="#858B9C" />
        <rect x="4" y="5" width="12" height="2" rx="1" fill="#858B9C" />
        <rect x="8" y="10" width="4" height="2" rx="1" fill="#858B9C" />
      </svg>
    </div> -->
    <h2>{{currentUser}}</h2>
  </div>

  <div class="rightBlock">
    <div class="dropdownsColumn">
      <!--Practice-->
      <div class="formField practiceDrop dropdown-maxh-300" (blur)="closeDropdown('siteDropdown')" tabindex="0" *ngIf="accountValues?.length > 0 && (userRole == 'siteadmin' || userRole == 'siteuser' || userRole == 'investigator' || userRole == 'investigatoradmin' || userRole == 'investigatoruser')">
        <div class="customInput" [ngClass]="{'active':selectedDropdown=='siteDropdown'}" (click)="openDropdown('siteDropdown')">
          <label>Site</label>
          <h3>{{selectedSite}}</h3>
        </div>
        <ul *ngIf="accountValues && accountValues.length>0">
          <li *ngFor="let value of accountValues" (click)="onAccountValueChanged(value)">{{value.name}}</li>
        </ul>
        <ul *ngIf="!accountValues || accountValues.length==0">
          <li (click)="selectedDropdown='none'">No Site</li>
        </ul>
      </div>

      <!--Location-->
      <div class="formField locationDrop dropdown-maxh-300" (blur)="closeDropdown('studyDropdown')" tabindex="0" *ngIf="(userRole == 'siteadmin' || userRole == 'siteuser' || userRole == 'investigator' || userRole == 'investigatoradmin' || userRole == 'investigatoruser' || userRole=='sponsoradmin' || userRole=='sponsoruser' || userRole=='crouser' || userRole=='croadmin')">
        <div class="customInput" [ngClass]="{'active':selectedDropdown=='studyDropdown'}" (click)="openDropdown('studyDropdown')">
          <label>Study</label>
          <h3>{{selectedStudy}}</h3>
        </div>
        <ul *ngIf="studies && studies.length>0">
          <li *ngFor="let study of studies" (click)="onStudyChanged(study)">{{study?.title}} ({{study?.protocolNumber}})</li>
        </ul>
        <ul *ngIf="!studies || studies.length==0">
          <li (click)="selectedDropdown='none'">No Study</li>
        </ul>
      </div>
    </div>

    <ul>
      <li>
        <a href="#">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17.5568 12.8898L15.9612 11.2734V7.23249C15.9612 4.17937 13.8338 1.48543 10.8199 1.03644C7.54017 0.67725 4.52632 3.01199 4.0831 6.33452C4.0831 6.60391 3.99446 6.8733 3.99446 7.1427V11.3632L2.39889 12.9796C1.86704 13.5183 1.86704 14.5061 2.39889 15.0449C2.75346 15.2245 3.10803 15.4041 3.4626 15.4041H6.47645V15.6735C6.5651 17.5592 8.16067 19.0858 10.0222 18.996C11.8837 19.0858 13.4792 17.649 13.5679 15.6735V15.4041H16.5817C17.3795 15.4041 18 14.7755 18 13.9673C18 13.5183 17.8227 13.1592 17.5568 12.8898ZM11.795 15.6735C11.7064 16.5715 10.9086 17.2001 10.0222 17.2001C9.13573 17.2899 8.33795 16.5715 8.24931 15.6735V15.4041H11.795V15.6735Z" fill="#363F57" fill-opacity="0.5" />
          </svg>
        </a>
      </li>

      <li>
        <a (click)="showProfilePopup=!showProfilePopup">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_81_16)">
              <path d="M19.0437 8.08125L17.925 7.93125C17.8524 7.92187 17.7841 7.89142 17.7285 7.84366C17.673 7.7959 17.6327 7.73292 17.6125 7.6625C17.4637 7.18138 17.2712 6.71486 17.0375 6.26875C17.0009 6.20586 16.9843 6.13332 16.9899 6.06076C16.9954 5.9882 17.023 5.91905 17.0688 5.8625L17.6875 5.04375C17.8687 4.80625 17.8563 4.59375 17.7188 4.45625L16.6375 3.38125L15.5438 2.28125C15.4777 2.2151 15.3898 2.1754 15.2965 2.16965C15.2033 2.16389 15.1111 2.19247 15.0375 2.25L14.1437 2.93125C14.086 2.97711 14.0158 3.0046 13.9423 3.01017C13.8688 3.01574 13.7952 2.99913 13.7312 2.9625C13.2851 2.72881 12.8186 2.53634 12.3375 2.3875C12.2671 2.36735 12.2041 2.32702 12.1563 2.27148C12.1086 2.21595 12.0781 2.14764 12.0687 2.075L11.9187 0.95625C11.9059 0.864305 11.8602 0.78011 11.7902 0.719221C11.7201 0.658332 11.6303 0.624864 11.5375 0.625H8.4625C8.36966 0.624864 8.27992 0.658332 8.20984 0.719221C8.13976 0.78011 8.09408 0.864305 8.08125 0.95625L7.93125 2.075C7.92187 2.14764 7.89142 2.21595 7.84366 2.27148C7.7959 2.32702 7.73292 2.36735 7.6625 2.3875C7.18138 2.53634 6.71486 2.72881 6.26875 2.9625C6.20586 2.99911 6.13332 3.01573 6.06076 3.01015C5.9882 3.00456 5.91905 2.97705 5.8625 2.93125L5.04375 2.3125C4.80625 2.13125 4.59375 2.14375 4.45625 2.28125L2.28125 4.45625C2.2151 4.52225 2.1754 4.61018 2.16965 4.70345C2.16389 4.79672 2.19247 4.88886 2.25 4.9625L2.93125 5.85625C2.97711 5.914 3.0046 5.98417 3.01017 6.05771C3.01574 6.13124 2.99913 6.20475 2.9625 6.26875C2.72881 6.71486 2.53634 7.18138 2.3875 7.6625C2.36735 7.73292 2.32702 7.7959 2.27148 7.84366C2.21595 7.89142 2.14764 7.92187 2.075 7.93125L0.95625 8.08125C0.864305 8.09408 0.78011 8.13976 0.719221 8.20984C0.658332 8.27992 0.624864 8.36966 0.625 8.4625V11.5375C0.624864 11.6303 0.658332 11.7201 0.719221 11.7902C0.78011 11.8602 0.864305 11.9059 0.95625 11.9187L2.075 12.0687C2.14764 12.0781 2.21595 12.1086 2.27148 12.1563C2.32702 12.2041 2.36735 12.2671 2.3875 12.3375C2.53634 12.8186 2.72881 13.2851 2.9625 13.7312C2.99911 13.7941 3.01573 13.8667 3.01015 13.9392C3.00456 14.0118 2.97705 14.0809 2.93125 14.1375L2.3125 14.9563C2.13125 15.1938 2.14375 15.4063 2.28125 15.5438L4.45625 17.7188C4.52225 17.7849 4.61018 17.8246 4.70345 17.8304C4.79672 17.8361 4.88886 17.8075 4.9625 17.75L5.85625 17.0688C5.914 17.0229 5.98417 16.9954 6.05771 16.9898C6.13124 16.9843 6.20475 17.0009 6.26875 17.0375C6.71486 17.2712 7.18138 17.4637 7.6625 17.6125C7.73292 17.6327 7.7959 17.673 7.84366 17.7285C7.89142 17.7841 7.92187 17.8524 7.93125 17.925L8.08125 19.0437C8.09408 19.1357 8.13976 19.2199 8.20984 19.2808C8.27992 19.3417 8.36966 19.3751 8.4625 19.375H11.5375C11.6303 19.3751 11.7201 19.3417 11.7902 19.2808C11.8602 19.2199 11.9059 19.1357 11.9187 19.0437L12.0687 17.925C12.0781 17.8524 12.1086 17.7841 12.1563 17.7285C12.2041 17.673 12.2671 17.6327 12.3375 17.6125C12.8186 17.4637 13.2851 17.2712 13.7312 17.0375C13.7941 17.0009 13.8667 16.9843 13.9392 16.9899C14.0118 16.9954 14.0809 17.023 14.1375 17.0688L14.9563 17.6875C15.1938 17.8687 15.4063 17.8563 15.5438 17.7188L16.6187 16.6375L17.7188 15.5438C17.7849 15.4777 17.8246 15.3898 17.8304 15.2965C17.8361 15.2033 17.8075 15.1111 17.75 15.0375L17.0688 14.1437C17.0229 14.086 16.9954 14.0158 16.9898 13.9423C16.9843 13.8688 17.0009 13.7952 17.0375 13.7312C17.2712 13.2851 17.4637 12.8186 17.6125 12.3375C17.6327 12.2671 17.673 12.2041 17.7285 12.1563C17.7841 12.1086 17.8524 12.0781 17.925 12.0687L19.0437 11.9187C19.1357 11.9059 19.2199 11.8602 19.2808 11.7902C19.3417 11.7201 19.3751 11.6303 19.375 11.5375V8.4625C19.3751 8.36966 19.3417 8.27992 19.2808 8.20984C19.2199 8.13976 19.1357 8.09408 19.0437 8.08125ZM10 13.125C9.38193 13.125 8.77775 12.9417 8.26384 12.5983C7.74994 12.255 7.3494 11.7669 7.11288 11.1959C6.87635 10.6249 6.81447 9.99653 6.93505 9.39034C7.05562 8.78415 7.35325 8.22733 7.79029 7.79029C8.22733 7.35325 8.78415 7.05562 9.39034 6.93505C9.99653 6.81447 10.6249 6.87635 11.1959 7.11288C11.7669 7.3494 12.255 7.74994 12.5983 8.26384C12.9417 8.77775 13.125 9.38193 13.125 10C13.125 10.8288 12.7958 11.6237 12.2097 12.2097C11.6237 12.7958 10.8288 13.125 10 13.125Z" fill="#363F57" fill-opacity="0.5" />
            </g>
            <defs>
              <clipPath id="clip0_81_16">
                <rect width="20" height="20" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </a>
      </li>
    </ul>
  </div>
</div>



<div class="profilePopup" [ngClass]="{'profilePopupActive':showProfilePopup}">
  <div class="profilePopupInner">
    <span class="profilePopupClose" (click)="showProfilePopup=false">
      <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10.9997 10.154L0.845703 0L-0.000121636 0.845825L10.1538 10.9998L10.9997 10.154Z" fill="#363F57" fill-opacity="0.5" />
        <path d="M0.846042 10.9997L11 0.845703L10.1542 -0.00012148L0.000217517 10.1538L0.846042 10.9997Z" fill="#363F57" fill-opacity="0.5" />
      </svg>
    </span>
    <div class="profilePopupTop">
      <span class="userImage">
        <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="30" cy="30" r="30" fill="#001729" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M38.8916 22.1892C38.8916 17.1141 34.7775 13 29.7024 13C24.6274 13 20.5132 17.1141 20.5132 22.1892C20.5132 27.2642 24.6274 31.3784 29.7024 31.3784C34.7775 31.3784 38.8916 27.2642 38.8916 22.1892ZM29.7024 15.5467C33.371 15.5467 36.3449 18.5206 36.3449 22.1892C36.3449 25.8578 33.371 28.8317 29.7024 28.8317C26.0339 28.8317 23.0599 25.8577 23.0599 22.1892C23.0599 18.5206 26.0339 15.5467 29.7024 15.5467Z" fill="white" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M44.4053 45.734C44.4053 38.7107 37.5622 33.4463 29.7026 33.4463C21.843 33.4463 14.9999 38.7107 14.9999 45.734C14.9999 46.4334 15.5634 47.0003 16.2586 47.0003C16.9538 47.0003 17.5174 46.4334 17.5174 45.734C17.5174 40.5708 22.7253 35.979 29.7026 35.979C36.6798 35.979 41.8877 40.5708 41.8877 45.734C41.8877 46.4334 42.4513 47.0003 43.1465 47.0003C43.8417 47.0003 44.4053 46.4334 44.4053 45.734Z" fill="white" />
        </svg>
      </span>

      <div class="userDetail">
        <h2>Hi: {{user.name}}</h2>
        <h4>{{lastLoginAt}}</h4>
      </div>
    </div>
    <div class="profilePopupBottom">
      <ul>
        <li>
          <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_668_13)">
              <path d="M24.3748 16C24.3748 15.7125 24.3623 15.4375 24.3373 15.15L26.6623 13.3875C27.1623 13.0125 27.2998 12.3125 26.9873 11.7625L24.6498 7.725C24.3373 7.175 23.6623 6.95 23.0873 7.2L20.3998 8.3375C19.9373 8.0125 19.4498 7.725 18.9373 7.4875L18.5748 4.6C18.4998 3.975 17.9623 3.5 17.3373 3.5H12.6748C12.0373 3.5 11.4998 3.975 11.4248 4.6L11.0623 7.4875C10.5498 7.725 10.0623 8.0125 9.59983 8.3375L6.91233 7.2C6.33733 6.95 5.66233 7.175 5.34983 7.725L3.01233 11.775C2.69983 12.325 2.83733 13.0125 3.33733 13.4L5.66233 15.1625C5.63733 15.4375 5.62483 15.7125 5.62483 16C5.62483 16.2875 5.63733 16.5625 5.66233 16.85L3.33733 18.6125C2.83733 18.9875 2.69983 19.6875 3.01233 20.2375L5.34983 24.275C5.66233 24.825 6.33733 25.05 6.91233 24.8L9.59983 23.6625C10.0623 23.9875 10.5498 24.275 11.0623 24.5125L11.4248 27.4C11.4998 28.025 12.0373 28.5 12.6623 28.5H17.3248C17.9498 28.5 18.4873 28.025 18.5623 27.4L18.9248 24.5125C19.4373 24.275 19.9248 23.9875 20.3873 23.6625L23.0748 24.8C23.6498 25.05 24.3248 24.825 24.6373 24.275L26.9748 20.2375C27.2873 19.6875 27.1498 19 26.6498 18.6125L24.3248 16.85C24.3623 16.5625 24.3748 16.2875 24.3748 16ZM15.0498 20.375C12.6373 20.375 10.6748 18.4125 10.6748 16C10.6748 13.5875 12.6373 11.625 15.0498 11.625C17.4623 11.625 19.4248 13.5875 19.4248 16C19.4248 18.4125 17.4623 20.375 15.0498 20.375Z" fill="#00A884" />
            </g>
            <defs>
              <clipPath id="clip0_668_13">
                <rect width="30" height="30" fill="white" />
              </clipPath>
            </defs>
          </svg>
          <span>Settings</span>
        </li>

        <li (click)="navigateToProfilePage()">
          <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M21.7329 9.43581C21.7329 5.88141 18.8515 3 15.2971 3C11.7427 3 8.86129 5.88141 8.86129 9.43581C8.86129 12.9902 11.7427 15.8716 15.2971 15.8716C18.8515 15.8716 21.7329 12.9902 21.7329 9.43581ZM15.2971 4.7836C17.8664 4.7836 19.9493 6.86647 19.9493 9.43581C19.9493 12.0052 17.8664 14.088 15.2971 14.088C12.7278 14.088 10.6449 12.0052 10.6449 9.43581C10.6449 6.86647 12.7278 4.7836 15.2971 4.7836Z" fill="#363F57" fill-opacity="0.5" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M25.5947 25.9257C25.5947 21.0068 20.8021 17.3198 15.2974 17.3198C9.79281 17.3198 5.00013 21.0068 5.00013 25.9257C5.00013 26.4156 5.39484 26.8126 5.88173 26.8126C6.36863 26.8126 6.76333 26.4156 6.76333 25.9257C6.76333 22.3096 10.4108 19.0936 15.2974 19.0936C20.184 19.0936 23.8315 22.3096 23.8315 25.9257C23.8315 26.4156 24.2262 26.8126 24.7131 26.8126C25.2 26.8126 25.5947 26.4156 25.5947 25.9257Z" fill="#363F57" fill-opacity="0.5" />
          </svg>
          <span>Profile</span>
        </li>

        <li>
          <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_731_16)">
              <path d="M26.2969 4H3.70306C2.76246 4 2 4.76246 2 5.70306V20.0087C2 20.9493 2.76252 21.7118 3.70306 21.7118H11.2022L13.6967 24.6775C14.0203 25.0623 14.4973 25.2844 15.0001 25.2844C15.5028 25.2844 15.9798 25.0623 16.3034 24.6775L18.7979 21.7118H26.2969C27.2375 21.7118 28 20.9493 28 20.0087V5.70306C28 4.76246 27.2375 4 26.2969 4ZM20.3882 17.6245H6.7035C6.23323 17.6245 5.85197 17.2432 5.85197 16.7729C5.85197 16.3027 6.23323 15.9214 6.7035 15.9214H20.3882C20.8585 15.9214 21.2398 16.3027 21.2398 16.7729C21.2398 17.2432 20.8585 17.6245 20.3882 17.6245ZM5.85197 12.9252C5.85197 12.4549 6.23323 12.0737 6.7035 12.0737H17.2115C17.6818 12.0737 18.0631 12.4549 18.0631 12.9252C18.0631 13.3955 17.6818 13.7767 17.2115 13.7767H6.7035C6.23323 13.7767 5.85197 13.3955 5.85197 12.9252ZM23.2965 9.92891H6.7035C6.23323 9.92891 5.85197 9.54765 5.85197 9.07738C5.85197 8.60711 6.23323 8.22585 6.7035 8.22585H23.2964C23.7667 8.22585 24.148 8.60711 24.148 9.07738C24.148 9.54765 23.7668 9.92891 23.2965 9.92891Z" fill="#363F57" fill-opacity="0.5" />
            </g>
            <defs>
              <clipPath id="clip0_731_16">
                <rect width="30" height="30" fill="white" />
              </clipPath>
            </defs>
          </svg>
          <span>My Messages</span>
        </li>

        <li (click)="logout()">
          <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_668_18)">
              <path d="M6.25 6.25H13.75C14.4375 6.25 15 5.6875 15 5C15 4.3125 14.4375 3.75 13.75 3.75H6.25C4.875 3.75 3.75 4.875 3.75 6.25V23.75C3.75 25.125 4.875 26.25 6.25 26.25H13.75C14.4375 26.25 15 25.6875 15 25C15 24.3125 14.4375 23.75 13.75 23.75H6.25V6.25Z" fill="#363F57" fill-opacity="0.5" />
              <path d="M25.8125 14.5627L22.325 11.0752C21.925 10.6752 21.25 10.9502 21.25 11.5127V13.7502H12.5C11.8125 13.7502 11.25 14.3127 11.25 15.0002C11.25 15.6877 11.8125 16.2502 12.5 16.2502H21.25V18.4877C21.25 19.0502 21.925 19.3252 22.3125 18.9252L25.8 15.4377C26.05 15.2002 26.05 14.8002 25.8125 14.5627Z" fill="#363F57" fill-opacity="0.5" />
            </g>
            <defs>
              <clipPath id="clip0_668_18">
                <rect width="30" height="30" fill="white" />
              </clipPath>
            </defs>
          </svg>
          <span>Logout</span>
        </li>
      </ul>
    </div>
  </div>
  <div class="profilePopupOverlay" (click)="showProfilePopup=false"></div>
</div>
